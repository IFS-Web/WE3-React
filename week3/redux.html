<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Redux - WE3 – React</title> <link rel="shortcut icon" href="/WE3-React/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/WE3-React/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/WE3-React/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Redux | WE3 – React</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Redux" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Unterlagen zum React-Teil des Web Engineering 3 Moduls der OST – Ostschweizer Fachhochschule" /> <meta property="og:description" content="Unterlagen zum React-Teil des Web Engineering 3 Moduls der OST – Ostschweizer Fachhochschule" /> <link rel="canonical" href="/WE3-React/week3/redux.html" /> <meta property="og:url" content="/WE3-React/week3/redux.html" /> <meta property="og:site_name" content="WE3 – React" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Redux" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Unterlagen zum React-Teil des Web Engineering 3 Moduls der OST – Ostschweizer Fachhochschule","headline":"Redux","url":"/WE3-React/week3/redux.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/WE3-React/" class="site-title lh-tight"> WE3 – React </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/WE3-React/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/WE3-React/introduction/" class="nav-list-link">Einführung</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/WE3-React/week1/" class="nav-list-link">Woche 1</a><ul class="nav-list "><li class="nav-list-item "><a href="/WE3-React/week1/jsx.html" class="nav-list-link">JSX</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/WE3-React/week2/" class="nav-list-link">Woche 2</a><ul class="nav-list "><li class="nav-list-item "><a href="/WE3-React/week2/introduction.html" class="nav-list-link">Woche 2 - Einführung</a></li><li class="nav-list-item "><a href="/WE3-React/week2/conditionalRendering.html" class="nav-list-link">Conditional Rendering</a></li><li class="nav-list-item "><a href="/WE3-React/week2/sessionStorage.html" class="nav-list-link">Session Storage</a></li><li class="nav-list-item "><a href="/WE3-React/week2/dataloading.html" class="nav-list-link">Data Loading</a></li><li class="nav-list-item "><a href="/WE3-React/week2/reactRouter.html" class="nav-list-link">React Router</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/WE3-React/week3/" class="nav-list-link">Woche 3</a><ul class="nav-list "><li class="nav-list-item "><a href="/WE3-React/week3/introduction.html" class="nav-list-link">Woche 3 - Einführung</a></li><li class="nav-list-item active"><a href="/WE3-React/week3/redux.html" class="nav-list-link active">Redux</a></li><li class="nav-list-item "><a href="/WE3-React/week3/react-redux.html" class="nav-list-link">React Redux</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/WE3-React/testat/" class="nav-list-link">Testat</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="/WE3-React/about.html" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/WE3-React/week3/">Woche 3</a></li> <li class="breadcrumb-nav-list-item"><span>Redux</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="redux---einführung"> <a href="#redux---einführung" class="anchor-heading" aria-labelledby="redux---einführung"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Redux - Einführung </h1> <p>Redux ermöglicht das einfache Handling des <strong>globalen States</strong> einer Anwendung an einer zentrierten Stelle, dem Redux <strong><em>Store</em></strong>.</p> <p align="center"> <img src="img/store.jpg" alt="store" width="200" /> </p> <p>Um den <strong>State</strong> zu ändern, werden sogenannte <strong><em>Actions</em> <em>dispatched</em></strong>.</p> <ul> <li><strong><em>Actions</em></strong> beschreiben dabei, was geändert werden soll</li> <li><strong><em>Dispatch</em></strong> kümmert sich um die Übermittlung an den <strong>Store</strong></li> </ul> <p align="center"> <img src="img/action_dispatch_store.jpg" alt="action_dispatch_store" width="500" /> </p> <p>Eine spezifische <strong><em>Aktion</em></strong> ändert im <strong><em>Store</em></strong> durch eine pure <strong><em>Reducer</em></strong>-Funktion den betroffenen <em>State</em>.</p> <ul> <li><strong><em>Reducer</em></strong> enthält die gewünschte Änderungslogik des von einer <strong><em>Aktion</em></strong> betroffenen <em>States</em>.</li> </ul> <p align="center"> <img src="img/reducer.jpg" alt="action_dispatch_store" width="500" /> </p> <h2 id="redux-beispiel"> <a href="#redux-beispiel" class="anchor-heading" aria-labelledby="redux-beispiel"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Redux Beispiel </h2> <p>Hier ist simples Beispiel von der <a href="https://redux.js.org/introduction/getting-started">Redux Webseite</a>.</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">createStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">redux</span><span class="dl">'</span><span class="p">;</span>

<span class="cm">/**
 * This is a reducer - a function that takes a current state value and an
 * action object describing "what happened", and returns a new state value.
 * A reducer's function signature is: (state, action) =&gt; newState
 *
 * The Redux state should contain only plain JS objects, arrays, and primitives.
 * The root state value is usually an object. It's important that you should
 * not mutate the state object, but return a new object if the state changes.
 *
 * You can use any conditional logic you want in a reducer. In this example,
 * we use a switch statement, but it's not required.
 */</span>
<span class="kd">function</span> <span class="nx">counterReducer</span><span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span> <span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">counter/incremented</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">};</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">counter/decremented</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">value</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">};</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Create a Redux store holding the state of your app.</span>
<span class="c1">// Its API is { subscribe, dispatch, getState }.</span>
<span class="kd">let</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">createStore</span><span class="p">(</span><span class="nx">counterReducer</span><span class="p">);</span>

<span class="c1">// You can use subscribe() to update the UI in response to state changes.</span>
<span class="c1">// Normally you'd use a view binding library (e.g. React Redux) rather than subscribe() directly.</span>
<span class="c1">// There may be additional use cases where it's helpful to subscribe as well.</span>

<span class="nx">store</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="p">()));</span>

<span class="c1">// The only way to mutate the internal state is to dispatch an action.</span>
<span class="c1">// The actions can be serialized, logged or stored and later replayed.</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">counter/incremented</span><span class="dl">'</span> <span class="p">});</span>
<span class="c1">// {value: 1}</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">counter/incremented</span><span class="dl">'</span> <span class="p">});</span>
<span class="c1">// {value: 2}</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">counter/decremented</span><span class="dl">'</span> <span class="p">});</span>
<span class="c1">// {value: 1}</span>
</code></pre></div></div> <p><em>Instead of mutating the state directly, you specify the mutations you want to happen with plain objects called actions. Then you write a special function called a reducer to decide how every action transforms the entire application’s state.</em></p> <p><em>In a typical Redux app, there is just a single store with a single root reducing function. As your app grows, you split the root reducer into smaller reducers independently operating on the different parts of the state tree. This is exactly like how there is just one root component in a React app, but it is composed out of many small components.</em></p> <p><em>This architecture might seem like a lot for a counter app, but the beauty of this pattern is how well it scales to large and complex apps. It also enables very powerful developer tools, because it is possible to trace every mutation to the action that caused it. You can record user sessions and reproduce them just by replaying every action.</em></p> <h2 id="redux-toolkit"> <a href="#redux-toolkit" class="anchor-heading" aria-labelledby="redux-toolkit"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Redux Toolkit </h2> <p>Das Redux Toolkit erleichtert die Benutzung von Redux.<br /> Eine Slice Taktik wird eingeführt, welche es verinfacht, verschiednene States, Actions und Reducers zu bündeln und auszulagern.</p> <p>Das obige Beispiel sieht durch die Verwendung von Redux Toolkit wiefolgt aus:</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">createSlice</span><span class="p">,</span> <span class="nx">configureStore</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@reduxjs/toolkit</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">counterSlice</span> <span class="o">=</span> <span class="nx">createSlice</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">counter</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">initialState</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">value</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">reducers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">incremented</span><span class="p">:</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Redux Toolkit allows us to write "mutating" logic in reducers. It</span>
      <span class="c1">// doesn't actually mutate the state because it uses the Immer library,</span>
      <span class="c1">// which detects changes to a "draft state" and produces a brand new</span>
      <span class="c1">// immutable state based off those changes</span>
      <span class="nx">state</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="na">decremented</span><span class="p">:</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">state</span><span class="p">.</span><span class="nx">value</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">});</span>

<span class="k">export</span> <span class="kd">const</span> <span class="p">{</span> <span class="nx">incremented</span><span class="p">,</span> <span class="nx">decremented</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">counterSlice</span><span class="p">.</span><span class="nx">actions</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">configureStore</span><span class="p">({</span>
  <span class="na">reducer</span><span class="p">:</span> <span class="nx">counterSlice</span><span class="p">.</span><span class="nx">reducer</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// Can still subscribe to the store</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="p">()));</span>

<span class="c1">// Still pass action objects to `dispatch`, but they're created for us</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">incremented</span><span class="p">());</span>
<span class="c1">// {value: 1}</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">incremented</span><span class="p">());</span>
<span class="c1">// {value: 2}</span>
<span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">decremented</span><span class="p">());</span>
<span class="c1">// {value: 1}</span>
</code></pre></div></div> <p>Die Ideen und Techniken bleiben dieselben, doch wie wir sehen werden erlaubt das Redux Toolkit eine etwas angenehmere Umsetzung.</p> <div class="prev-next-area mt-8"> <p class="float-left fs-2">Previous<br/> <a href="/WE3-React/week3/introduction.html" title="Woche 3 - Einführung"> ← Woche 3 - Einführung </a> </p> <p class="float-right fs-2">Next<br/> <a href="/WE3-React/week3/react-redux.html" title="Woche 3 - Einführung"> React Redux → </a> </p> </div> <div style="clear: both"></div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright © 2022 Mirko Stocker. This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons A-NC-SA 4.0 International License</a>.</p> </footer> </div> </div> </div> </body> </html>
